import time
import RPi.GPIO as io
import socket
io.setmode(io.BCM)
     

UDP_IP = "145.89.157.142"

UDP_PORT = 5005

door_pin = 23
light_pin = 24
printed = 0
loop = 1

def ontvang():
    print("UDP target IP:", UDP_IP)

    print("UDP target port:", UDP_PORT)

    print("message:", MESSAGE)

    sock = socket.socket(socket.AF_INET,  # Internet

    socket.SOCK_DGRAM)  # UDP


    sock.sendto(MESSAGE.encode(), (UDP_IP, UDP_PORT))
    sock.sendto(MESSAGE.encode(), (UDP_IP, UDP_PORT))
    sock.sendto('JFDHJD'.encode(), (UDP_IP, UDP_PORT))

io.cleanup()   
io.setup(door_pin, io.IN, pull_up_down=io.PUD_UP) # activate input with PullUp
io.setup(light_pin,io.OUT)
io.output(light_pin, io.LOW)
while loop:
    if io.input(door_pin):
        MESSAGE = "OPEN"
        io.output(light_pin, io.HIGH)
        ontvang()
    else:
        MESSAGE = "DICHT"
        io.output(light_pin, io.LOW)
        ontvang()
           
time.sleep(0.5)

#import RPi.GPIO as io
#io.setmode(io.BCM)

MESSAGE = "Deur is open"
#door_pin = 23

#io.setup(door_pin, io.IN, pull_up_down=io.PUD_UP)


#MESSAGE = "Deur is open"

#while loop:
 #   if io.input(door_pin):
         #MESSAGE = "Deur open"
  #      print(MESSAGE)
   # else:
    #    print("Deur is dicht!!")

#time.sleep(1)

io.cleanup()
